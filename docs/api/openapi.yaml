openapi: 3.1.0
info:
  title: Jira Release Manager REST API
  version: 1.0.0
  description: Generated specification for the versioned REST endpoints exposed
    under /api/v1.
servers:
  - url: /api/v1
    description: Application server
paths:
  /release-versions/new-values:
    get:
      operationId: getReleaseVersionDefaults
      summary: Get default release version values
      tags:
        - Release Versions
      responses:
        "200":
          description: Default values for new release version
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                  releaseTrack:
                    type: string
                    enum:
                      - Future
                      - Beta
                      - Rollout
                      - Active
                      - Archived
                required:
                  - name
                  - releaseTrack
                additionalProperties: false
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions:
    get:
      operationId: listReleaseVersions
      summary: List release versions
      tags:
        - Release Versions
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            description: Requested page number
            minimum: 1
        - in: query
          name: pageSize
          schema:
            type: integer
            description: Number of items per page
            minimum: 1
        - in: query
          name: sortBy
          schema:
            description: Sort field. Use "-" prefix for descending order.
            type: string
            enum:
              - createdAt
              - name
              - -createdAt
              - -name
        - in: query
          name: relations
          schema:
            description: Relations to include in the response
            type: array
            items:
              type: string
              enum:
                - creater
                - patches
                - patches.deployedComponents
                - patches.transitions
      responses:
        "200":
          description: Release versions page
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        id:
                          $ref: "#/components/schemas/uuidv7"
                        releaseTrack:
                          type: string
                          enum:
                            - Future
                            - Beta
                            - Rollout
                            - Active
                            - Archived
                        createdAt:
                          $ref: "#/components/schemas/iso8601Timestamp"
                        creater:
                          $ref: "#/components/schemas/User"
                        patches:
                          type: array
                          items:
                            type: object
                            properties:
                              name:
                                type: string
                              id:
                                $ref: "#/components/schemas/uuidv7"
                              versionId:
                                $ref: "#/components/schemas/uuidv7"
                              currentStatus:
                                type: string
                                enum:
                                  - in_development
                                  - in_deployment
                                  - active
                                  - deprecated
                              createdAt:
                                $ref: "#/components/schemas/iso8601Timestamp"
                              deployedComponents:
                                type: array
                                items:
                                  $ref: "#/components/schemas/ComponentVersion"
                              transitions:
                                type: array
                                items:
                                  $ref: "#/components/schemas/PatchTransition"
                            required:
                              - name
                              - id
                              - versionId
                              - currentStatus
                              - createdAt
                            additionalProperties: false
                      required:
                        - name
                        - id
                        - releaseTrack
                        - createdAt
                      additionalProperties: false
                  pagination:
                    $ref: "#/components/schemas/PaginationInfo"
                required:
                  - data
                  - pagination
                additionalProperties: false
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
    post:
      operationId: createReleaseVersion
      summary: Create release version
      tags:
        - Release Versions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                releaseTrack:
                  type: string
                  enum:
                    - Future
                    - Beta
                    - Rollout
                    - Active
                    - Archived
      responses:
        "201":
          description: Release version created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseVersion"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "409":
          description: Release already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}:
    get:
      operationId: getReleaseVersion
      summary: Get release version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: query
          name: relations
          schema:
            description: Relations to include in the response
            type: array
            items:
              type: string
              enum:
                - creater
                - patches
                - patches.deployedComponents
                - patches.transitions
      responses:
        "200":
          description: Release version
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                  id:
                    $ref: "#/components/schemas/uuidv7"
                  releaseTrack:
                    type: string
                    enum:
                      - Future
                      - Beta
                      - Rollout
                      - Active
                      - Archived
                  createdAt:
                    $ref: "#/components/schemas/iso8601Timestamp"
                  creater:
                    $ref: "#/components/schemas/User"
                  patches:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        id:
                          $ref: "#/components/schemas/uuidv7"
                        versionId:
                          $ref: "#/components/schemas/uuidv7"
                        currentStatus:
                          type: string
                          enum:
                            - in_development
                            - in_deployment
                            - active
                            - deprecated
                        createdAt:
                          $ref: "#/components/schemas/iso8601Timestamp"
                        deployedComponents:
                          type: array
                          items:
                            $ref: "#/components/schemas/ComponentVersion"
                        transitions:
                          type: array
                          items:
                            $ref: "#/components/schemas/PatchTransition"
                      required:
                        - name
                        - id
                        - versionId
                        - currentStatus
                        - createdAt
                      additionalProperties: false
                required:
                  - name
                  - id
                  - releaseTrack
                  - createdAt
                additionalProperties: false
        "404":
          description: Release not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
    patch:
      operationId: updateReleaseVersion
      summary: Update release version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                releaseTrack:
                  type: string
                  enum:
                    - Future
                    - Beta
                    - Rollout
                    - Active
                    - Archived
      responses:
        "200":
          description: Release version updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseVersion"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Release not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "409":
          description: Release already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/track:
    patch:
      operationId: updateReleaseVersionTrack
      summary: Update release version track
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                releaseTrack:
                  type: string
                  enum:
                    - Future
                    - Beta
                    - Rollout
                    - Active
                    - Archived
      responses:
        "200":
          description: Release version track updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseVersion"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Release not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-components:
    get:
      operationId: listReleaseComponents
      summary: List release components
      tags:
        - Release Components
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            maximum: 9007199254740991
        - in: query
          name: pageSize
          schema:
            type: integer
            minimum: 1
            maximum: 100
        - in: query
          name: search
          schema:
            type: string
            minLength: 1
        - in: query
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
      responses:
        "200":
          description: Release components page
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                    minimum: -9007199254740991
                    maximum: 9007199254740991
                  page:
                    type: integer
                    minimum: -9007199254740991
                    maximum: 9007199254740991
                  pageSize:
                    type: integer
                    minimum: -9007199254740991
                    maximum: 9007199254740991
                  items:
                    type: array
                    items:
                      $ref: "#/components/schemas/ReleaseComponent"
                required:
                  - total
                  - page
                  - pageSize
                  - items
                additionalProperties: false
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
    post:
      operationId: createReleaseComponent
      summary: Create release component
      tags:
        - Release Components
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                color:
                  type: string
                  enum:
                    - red
                    - orange
                    - amber
                    - yellow
                    - lime
                    - green
                    - emerald
                    - teal
                    - cyan
                    - sky
                    - blue
                    - indigo
                    - violet
                    - purple
                    - fuchsia
                    - pink
                    - rose
                namingPattern:
                  type: string
                  minLength: 1
                releaseScope:
                  type: string
                  enum:
                    - version-bound
                    - global
              required:
                - name
                - color
                - namingPattern
                - releaseScope
      responses:
        "201":
          description: Release component created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseComponent"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "409":
          description: Component already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-components/{componentId}:
    get:
      operationId: getReleaseComponent
      summary: Get release component
      tags:
        - Release Components
      parameters:
        - in: path
          name: componentId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Release component
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseComponent"
        "404":
          description: Component not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/patches/{patchId}/start-deployment:
    post:
      operationId: startDeploymentPatch
      summary: Start deployment patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
        - in: path
          name: patchId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PatchTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/patches/{patchId}/cancel-deployment:
    post:
      operationId: cancelDeploymentPatch
      summary: Cancel deployment patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
        - in: path
          name: patchId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PatchTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/patches/{patchId}/mark-active:
    post:
      operationId: markActivePatch
      summary: Mark active patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
        - in: path
          name: patchId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PatchTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/patches/{patchId}/revert-to-deployment:
    post:
      operationId: revertToDeploymentPatch
      summary: Revert to deployment patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
        - in: path
          name: patchId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PatchTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/patches/{patchId}/deprecate:
    post:
      operationId: deprecatePatch
      summary: Deprecate patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
        - in: path
          name: patchId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PatchTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/patches/{patchId}/reactivate:
    post:
      operationId: reactivatePatch
      summary: Reactivate patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
        - in: path
          name: patchId
          schema:
            $ref: "#/components/schemas/uuidv7"
          required: true
          description: Universally unique identifier (version 7).
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PatchTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /action-history:
    get:
      operationId: listActionHistory
      summary: List action history for current session
      tags:
        - Action History
      parameters:
        - in: query
          name: page
          schema:
            default: 1
            description: Requested page number
            type: integer
            minimum: 1
        - in: query
          name: pageSize
          schema:
            default: 5
            description: Number of items per page
            type: integer
            minimum: 1
        - in: query
          name: sortBy
          schema:
            description: Sort field. Use "-" prefix for descending order.
            default: -createdAt
            type: string
            enum:
              - createdAt
              - -createdAt
          description: Sort field. Use "-" prefix for descending order.
      responses:
        "200":
          description: Action history page
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ActionHistoryListResponse"
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/patches:
    get:
      operationId: listPatches
      summary: List patches for a release
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Patches
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Patch"
        "404":
          description: Release not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
    post:
      operationId: createPatch
      summary: Create patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                versionId:
                  type: string
                  format: uuid
                  pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
                name:
                  type: string
                  minLength: 1
              required:
                - versionId
                - name
      responses:
        "201":
          description: Patch created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Patch"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /patches/{patchId}/default-selection:
    get:
      operationId: getPatchDefaultSelection
      summary: Get default component selection for a patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: patchId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Default component selection
          content:
            application/json:
              schema:
                type: object
                properties:
                  selectedReleaseComponentIds:
                    type: array
                    items:
                      type: string
                      format: uuid
                      pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
                required:
                  - selectedReleaseComponentIds
                additionalProperties: false
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /patches/{patchId}/component-versions:
    get:
      operationId: listComponentVersionsByPatch
      summary: List component versions for a patch
      tags:
        - Release Versions
      parameters:
        - in: path
          name: patchId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Component versions
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ComponentVersion"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /patches/{patchId}/successor:
    post:
      operationId: createSuccessorPatch
      summary: Arrange successor patch components
      tags:
        - Release Versions
      parameters:
        - in: path
          name: patchId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                patchId:
                  type: string
                  format: uuid
                  pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
                selectedReleaseComponentIds:
                  minItems: 1
                  type: array
                  items:
                    type: string
                    format: uuid
                    pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
              required:
                - patchId
                - selectedReleaseComponentIds
      responses:
        "200":
          description: Successor arrangement result
          content:
            application/json:
              schema:
                type: object
                properties:
                  summary:
                    type: object
                    properties:
                      moved:
                        type: integer
                        minimum: -9007199254740991
                        maximum: 9007199254740991
                      created:
                        type: integer
                        minimum: -9007199254740991
                        maximum: 9007199254740991
                      updated:
                        type: integer
                        minimum: -9007199254740991
                        maximum: 9007199254740991
                      successorPatchId:
                        type: string
                    required:
                      - moved
                      - created
                      - updated
                      - successorPatchId
                    additionalProperties: false
                  status:
                    type: string
                    enum:
                      - in_development
                      - in_deployment
                      - active
                      - deprecated
                  history:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
                        fromStatus:
                          type: string
                          enum:
                            - in_development
                            - in_deployment
                            - active
                            - deprecated
                        toStatus:
                          type: string
                          enum:
                            - in_development
                            - in_deployment
                            - active
                            - deprecated
                        action:
                          type: string
                          enum:
                            - startDeployment
                            - cancelDeployment
                            - markActive
                            - revertToDeployment
                            - deprecate
                            - reactivate
                        createdAt:
                          type: string
                        createdById:
                          type: string
                          format: uuid
                          pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
                      required:
                        - id
                        - fromStatus
                        - toStatus
                        - action
                        - createdAt
                        - createdById
                      additionalProperties: false
                required:
                  - summary
                  - status
                  - history
                additionalProperties: false
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Patch not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /jira/setup/config:
    get:
      operationId: getJiraSetupConfig
      summary: Get Jira setup configuration
      tags:
        - Jira
      responses:
        "200":
          description: Jira setup configuration
  /jira/setup/credentials:
    get:
      operationId: getJiraCredentials
      summary: Get Jira credentials
      tags:
        - Jira
      responses:
        "200":
          description: Jira credentials
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    anyOf:
                      - type: string
                      - type: "null"
                  hasToken:
                    type: boolean
                required:
                  - email
                  - hasToken
                additionalProperties: false
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
    post:
      operationId: saveJiraCredentials
      summary: Save Jira credentials
      tags:
        - Jira
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                apiToken:
                  type: string
                  minLength: 1
              required:
                - email
      responses:
        "200":
          description: Credentials saved
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "412":
          description: Prerequisite missing
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /jira/setup/verify:
    post:
      operationId: verifyJiraConnection
      summary: Verify Jira connection
      tags:
        - Jira
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                apiToken:
                  type: string
                  minLength: 1
              required:
                - email
      responses:
        "200":
          description: Verification result
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /jira/setup/status:
    get:
      operationId: getJiraSetupStatus
      summary: Get Jira setup readiness
      tags:
        - Jira
      responses:
        "200":
          description: Setup readiness
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /jira/releases/stored:
    get:
      operationId: listStoredJiraVersions
      summary: List stored Jira versions
      tags:
        - Jira
      parameters:
        - in: query
          name: includeReleased
          schema:
            type: boolean
        - in: query
          name: includeUnreleased
          schema:
            type: boolean
        - in: query
          name: includeArchived
          schema:
            type: boolean
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            maximum: 9007199254740991
        - in: query
          name: pageSize
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: Stored Jira versions
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /jira/releases/sync:
    post:
      operationId: syncJiraVersions
      summary: Sync Jira versions
      tags:
        - Jira
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                includeReleased:
                  type: boolean
                includeUnreleased:
                  type: boolean
                includeArchived:
                  type: boolean
                pageSize:
                  type: integer
                  minimum: 1
                  maximum: 100
      responses:
        "200":
          description: Sync result
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "412":
          description: Jira configuration missing
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /users/me:
    get:
      operationId: getCurrentUser
      summary: Get current user
      tags:
        - Users
      responses:
        "200":
          description: Current user profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
                  name:
                    anyOf:
                      - type: string
                      - type: "null"
                  email:
                    anyOf:
                      - type: string
                      - type: "null"
                  permissions:
                    type: object
                    properties:
                      releaseVersions:
                        type: object
                        properties:
                          create:
                            type: boolean
                        required:
                          - create
                        additionalProperties: false
                      releaseComponents:
                        type: object
                        properties:
                          create:
                            type: boolean
                        required:
                          - create
                        additionalProperties: false
                      patches:
                        type: object
                        properties:
                          transition:
                            type: boolean
                        required:
                          - transition
                        additionalProperties: false
                    required:
                      - releaseVersions
                      - releaseComponents
                      - patches
                    additionalProperties: false
                required:
                  - id
                  - name
                  - email
                  - permissions
                additionalProperties: false
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
components:
  schemas:
    uuidv7:
      title: UUIDv7
      description: Universally unique identifier (version 7).
      examples:
        - 018f0b4e-5ff9-7000-8000-000000000000
      type: string
      pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-7[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$
    RestError:
      title: REST Error
      description: Standard envelope for REST error responses.
      examples:
        - code: VALIDATION_ERROR
          message: Invalid request payload
          details:
            field: name
      type: object
      properties:
        code:
          type: string
        message:
          type: string
        details:
          anyOf:
            - $ref: "#/components/schemas/RestErrorDetails"
            - type: "null"
      required:
        - code
        - message
      additionalProperties: false
    RestErrorDetails:
      title: REST Error Details
      description: Arbitrary structured data providing additional error context.
    iso8601Timestamp:
      title: ISO 8601 Timestamp
      description: UTC timestamp string ending with 'Z'.
      examples:
        - 2025-01-01T12:34:56.000Z
      type: string
      pattern: ^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$
    User:
      title: User
      description: Basic user summary details.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/uuidv7"
        name:
          anyOf:
            - type: string
            - type: "null"
        email:
          anyOf:
            - type: string
            - type: "null"
      required:
        - id
        - name
        - email
      additionalProperties: false
    ComponentVersion:
      title: Component Version
      description: Component version details deployed with a patch.
      type: object
      properties:
        name:
          type: string
        increment:
          type: integer
          minimum: -9007199254740991
          maximum: 9007199254740991
        id:
          $ref: "#/components/schemas/uuidv7"
        releaseComponentId:
          $ref: "#/components/schemas/uuidv7"
        patchId:
          $ref: "#/components/schemas/uuidv7"
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - name
        - increment
        - id
        - releaseComponentId
        - patchId
        - createdAt
      additionalProperties: false
    PatchTransition:
      title: Patch Transition
      description: Status transition event for a patch.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/uuidv7"
        patchId:
          $ref: "#/components/schemas/uuidv7"
        fromStatus:
          type: string
          enum:
            - in_development
            - in_deployment
            - active
            - deprecated
        toStatus:
          type: string
          enum:
            - in_development
            - in_deployment
            - active
            - deprecated
        action:
          type: string
          enum:
            - startDeployment
            - cancelDeployment
            - markActive
            - revertToDeployment
            - deprecate
            - reactivate
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
        createdById:
          $ref: "#/components/schemas/uuidv7"
      required:
        - id
        - patchId
        - fromStatus
        - toStatus
        - action
        - createdAt
        - createdById
      additionalProperties: false
    PaginationInfo:
      title: Pagination Info
      description: Normalized pagination metadata.
      type: object
      properties:
        page:
          type: integer
          minimum: 1
        pageSize:
          type: integer
          minimum: 1
        totalItems:
          type: integer
          minimum: 0
        hasNextPage:
          type: boolean
      required:
        - page
        - pageSize
        - totalItems
        - hasNextPage
      additionalProperties: false
    ReleaseVersion:
      title: Release Version
      description: Release version summary information.
      type: object
      properties:
        name:
          type: string
        id:
          $ref: "#/components/schemas/uuidv7"
        releaseTrack:
          type: string
          enum:
            - Future
            - Beta
            - Rollout
            - Active
            - Archived
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - name
        - id
        - releaseTrack
        - createdAt
      additionalProperties: false
    ReleaseComponent:
      title: Release Component
      description: Release component metadata.
      type: object
      properties:
        name:
          type: string
        color:
          type: string
        namingPattern:
          type: string
        releaseScope:
          type: string
          enum:
            - version-bound
            - global
        id:
          $ref: "#/components/schemas/uuidv7"
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - name
        - color
        - namingPattern
        - releaseScope
        - id
        - createdAt
      additionalProperties: false
    PatchTransitionResult:
      title: Patch Transition Result
      description: Patch transition response including current status and history.
      type: object
      properties:
        patch:
          $ref: "#/components/schemas/Patch"
        status:
          type: string
          enum:
            - in_development
            - in_deployment
            - active
            - deprecated
        history:
          type: array
          items:
            $ref: "#/components/schemas/PatchTransition"
      required:
        - patch
        - status
        - history
      additionalProperties: false
    Patch:
      title: Patch
      description: Patch summary information.
      type: object
      properties:
        name:
          type: string
        id:
          $ref: "#/components/schemas/uuidv7"
        versionId:
          $ref: "#/components/schemas/uuidv7"
        currentStatus:
          type: string
          enum:
            - in_development
            - in_deployment
            - active
            - deprecated
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - name
        - id
        - versionId
        - currentStatus
        - createdAt
      additionalProperties: false
    ActionHistoryListResponse:
      title: Action History List Response
      description: Paginated action history entries for the current session.
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/ActionHistoryEntry"
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
      required:
        - data
        - pagination
      additionalProperties: false
    ActionHistoryEntry:
      title: Action History Entry
      description: Audit log entry for user or system actions.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/uuidv7"
        actionType:
          type: string
        message:
          type: string
        status:
          type: string
          enum:
            - success
            - failed
            - cancelled
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
        createdBy:
          $ref: "#/components/schemas/User"
        metadata:
          anyOf:
            - type: object
              properties: {}
              additionalProperties: {}
            - type: "null"
        subactions:
          type: array
          items:
            $ref: "#/components/schemas/ActionSubaction"
      required:
        - id
        - actionType
        - message
        - status
        - createdAt
        - createdBy
        - subactions
      additionalProperties: false
    ActionSubaction:
      title: Action Subaction
      description: Subaction entry recorded within a user action history item.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/uuidv7"
        subactionType:
          type: string
        message:
          type: string
        status:
          type: string
          enum:
            - success
            - failed
            - cancelled
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
        metadata:
          anyOf:
            - type: object
              properties: {}
              additionalProperties: {}
            - type: "null"
      required:
        - id
        - subactionType
        - message
        - status
        - createdAt
      additionalProperties: false
