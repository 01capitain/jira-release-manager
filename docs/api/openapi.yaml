openapi: 3.1.0
info:
  title: Jira Release Manager REST API
  version: 1.0.0
  description: Generated specification for the versioned REST endpoints exposed
    under /api/v1.
servers:
  - url: /api/v1
    description: Application server
paths:
  /release-versions:
    get:
      operationId: listReleaseVersions
      summary: List release versions
      tags:
        - Release Versions
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            description: Requested Page number
            minimum: 1
        - in: query
          name: pageSize
          schema:
            type: integer
            description: Number of items per page
            minimum: 1
        - in: query
          name: sortBy
          schema:
            description: Sort field. Use "-" prefix for descending order.
            type: string
            enum:
              - createdAt
              - name
              - -createdAt
              - -name
        - in: query
          name: relations
          schema:
            description: Optional relation keys to include in the response. Repeat the query
              param or pass a comma-separated string. Nested options
              (builtVersions.deployedComponents, builtVersions.transitions) must
              be accompanied by their parent relation.
            type: array
            items:
              type: string
              enum:
                - creater
                - builtVersions
          description: Optional relation keys to include in the response. Repeat the query
            param or pass a comma-separated string. Nested options
            (builtVersions.deployedComponents, builtVersions.transitions) must
            be accompanied by their parent relation.
      responses:
        "200":
          description: Release versions page
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseVersionListResponse"
        "400":
          description: Invalid query parameters or relations
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
    post:
      operationId: createReleaseVersion
      summary: Create release version
      tags:
        - Release Versions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
              required:
                - name
      responses:
        "201":
          description: Release version created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseVersion"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "409":
          description: Release already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}:
    get:
      operationId: getReleaseVersion
      summary: Get release version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: query
          name: relations
          schema:
            description: Optional relation keys to include in the response. Repeat the query
              param or pass a comma-separated string. Nested options
              (builtVersions.deployedComponents, builtVersions.transitions) must
              be accompanied by their parent relation.
            type: array
            items:
              type: string
              enum:
                - creater
                - builtVersions
          description: Optional relation keys to include in the response. Repeat the query
            param or pass a comma-separated string. Nested options
            (builtVersions.deployedComponents, builtVersions.transitions) must
            be accompanied by their parent relation.
      responses:
        "200":
          description: Release version
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseVersionWithRelations"
        "400":
          description: Invalid relations
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Release not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-components:
    get:
      operationId: listReleaseComponents
      summary: List release components
      tags:
        - Release Components
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            maximum: 9007199254740991
        - in: query
          name: pageSize
          schema:
            type: integer
            minimum: 1
            maximum: 100
        - in: query
          name: search
          schema:
            type: string
            minLength: 1
        - in: query
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
      responses:
        "200":
          description: Release components page
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                    minimum: -9007199254740991
                    maximum: 9007199254740991
                  page:
                    type: integer
                    minimum: -9007199254740991
                    maximum: 9007199254740991
                  pageSize:
                    type: integer
                    minimum: -9007199254740991
                    maximum: 9007199254740991
                  items:
                    type: array
                    items:
                      $ref: "#/components/schemas/ReleaseComponent"
                required:
                  - total
                  - page
                  - pageSize
                  - items
                additionalProperties: false
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
    post:
      operationId: createReleaseComponent
      summary: Create release component
      tags:
        - Release Components
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                color:
                  type: string
                  enum:
                    - slate
                    - gray
                    - zinc
                    - neutral
                    - stone
                    - red
                    - orange
                    - amber
                    - yellow
                    - lime
                    - green
                    - emerald
                    - teal
                    - cyan
                    - sky
                    - blue
                    - indigo
                    - violet
                    - purple
                    - fuchsia
                    - pink
                    - rose
                namingPattern:
                  type: string
                  minLength: 1
              required:
                - name
                - color
                - namingPattern
      responses:
        "201":
          description: Release component created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseComponent"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "409":
          description: Component already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-components/{componentId}:
    get:
      operationId: getReleaseComponent
      summary: Get release component
      tags:
        - Release Components
      parameters:
        - in: path
          name: componentId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Release component
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReleaseComponent"
        "404":
          description: Component not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/built-versions/{builtId}/start-deployment:
    post:
      operationId: startDeploymentBuiltVersion
      summary: Start deployment built version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: path
          name: builtId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuiltVersionTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Built version not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/built-versions/{builtId}/cancel-deployment:
    post:
      operationId: cancelDeploymentBuiltVersion
      summary: Cancel deployment built version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: path
          name: builtId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuiltVersionTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Built version not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/built-versions/{builtId}/mark-active:
    post:
      operationId: markActiveBuiltVersion
      summary: Mark active built version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: path
          name: builtId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuiltVersionTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Built version not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/built-versions/{builtId}/revert-to-deployment:
    post:
      operationId: revertToDeploymentBuiltVersion
      summary: Revert to deployment built version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: path
          name: builtId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuiltVersionTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Built version not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/built-versions/{builtId}/deprecate:
    post:
      operationId: deprecateBuiltVersion
      summary: Deprecate built version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: path
          name: builtId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuiltVersionTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Built version not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /release-versions/{releaseId}/built-versions/{builtId}/reactivate:
    post:
      operationId: reactivateBuiltVersion
      summary: Reactivate built version
      tags:
        - Release Versions
      parameters:
        - in: path
          name: releaseId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
        - in: path
          name: builtId
          schema:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
          required: true
      responses:
        "200":
          description: Transition result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuiltVersionTransitionResult"
        "400":
          description: Invalid transition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "404":
          description: Built version not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /action-history:
    get:
      operationId: listActionHistory
      summary: List action history for current session
      tags:
        - Action History
      parameters:
        - in: query
          name: page
          schema:
            description: Requested Page number
            type: integer
            minimum: 1
          description: Requested Page number
        - in: query
          name: pageSize
          schema:
            description: Number of items per page
            type: integer
            minimum: 1
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            description: Sort field. Use "-" prefix for descending order.
            default: -createdAt
            type: string
            enum:
              - createdAt
              - -createdAt
          description: Sort field. Use "-" prefix for descending order.
      responses:
        "200":
          description: Action history page
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ActionHistoryListResponse"
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
  /users/me:
    get:
      operationId: getCurrentUser
      summary: Get current user
      tags:
        - Users
      responses:
        "200":
          description: Current user profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-7[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$
                  name:
                    anyOf:
                      - type: string
                      - type: "null"
                  email:
                    anyOf:
                      - type: string
                      - type: "null"
                  permissions:
                    type: object
                    properties:
                      releaseVersions:
                        type: object
                        properties:
                          create:
                            type: boolean
                        required:
                          - create
                        additionalProperties: false
                      releaseComponents:
                        type: object
                        properties:
                          create:
                            type: boolean
                        required:
                          - create
                        additionalProperties: false
                      builtVersions:
                        type: object
                        properties:
                          transition:
                            type: boolean
                        required:
                          - transition
                        additionalProperties: false
                    required:
                      - releaseVersions
                      - releaseComponents
                      - builtVersions
                    additionalProperties: false
                required:
                  - id
                  - name
                  - email
                  - permissions
                additionalProperties: false
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RestError"
components:
  schemas:
    ReleaseVersionListResponse:
      title: Release Version List Response
      description: Paginated release version list response.
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/ReleaseVersionWithRelations"
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
      required:
        - data
        - pagination
      additionalProperties: false
    ReleaseVersionWithRelations:
      title: Release Version (with relations)
      description: Release version data including optional creator and built version
        relations.
      allOf:
        - $ref: "#/components/schemas/ReleaseVersion"
        - type: object
          properties:
            creater:
              $ref: "#/components/schemas/User"
            builtVersions:
              type: array
              items:
                $ref: "#/components/schemas/BuiltVersionWithRelations"
          additionalProperties: false
    ReleaseVersion:
      title: Release Version
      description: Release version summary information.
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - id
        - name
        - createdAt
      additionalProperties: false
    iso8601Timestamp:
      title: ISO 8601 Timestamp
      description: UTC timestamp string ending with 'Z'.
      examples:
        - 2025-01-01T12:34:56.000Z
      type: string
      pattern: ^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$
    User:
      title: User
      description: Basic user summary details.
      type: object
      properties:
        id:
          type: string
        name:
          anyOf:
            - type: string
            - type: "null"
        email:
          anyOf:
            - type: string
            - type: "null"
      required:
        - id
        - name
        - email
      additionalProperties: false
    BuiltVersionWithRelations:
      title: Built Version (with relations)
      description: Built version data with optional deployed components and transitions.
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        versionId:
          type: string
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
        deployedComponents:
          type: array
          items:
            $ref: "#/components/schemas/ComponentVersion"
        transitions:
          type: array
          items:
            $ref: "#/components/schemas/BuiltVersionTransition"
      required:
        - id
        - name
        - versionId
        - createdAt
      additionalProperties: false
    ComponentVersion:
      title: Component Version
      description: Component version details deployed with a built version.
      type: object
      properties:
        id:
          type: string
        releaseComponentId:
          type: string
        builtVersionId:
          type: string
        name:
          type: string
        increment:
          type: integer
          minimum: 0
          maximum: 9007199254740991
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - id
        - releaseComponentId
        - builtVersionId
        - name
        - increment
        - createdAt
      additionalProperties: false
    BuiltVersionTransition:
      title: Built Version Transition
      description: Status transition event for a built version.
      type: object
      properties:
        id:
          type: string
        builtVersionId:
          type: string
        fromStatus:
          type: string
        toStatus:
          type: string
        action:
          type: string
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
        createdById:
          type: string
      required:
        - id
        - builtVersionId
        - fromStatus
        - toStatus
        - action
        - createdAt
        - createdById
      additionalProperties: false
    PaginationInfo:
      title: Pagination Info
      description: Normalized pagination metadata.
      type: object
      properties:
        page:
          type: integer
          minimum: 1
        pageSize:
          type: integer
          minimum: 1
        totalItems:
          type: integer
          minimum: 0
        hasNextPage:
          type: boolean
      required:
        - page
        - pageSize
        - totalItems
        - hasNextPage
      additionalProperties: false
    RestError:
      title: REST Error
      description: Standard envelope for REST error responses.
      examples:
        - code: VALIDATION_ERROR
          message: Invalid request payload
          details:
            field: name
      type: object
      properties:
        code:
          type: string
        message:
          type: string
        details:
          anyOf:
            - $ref: "#/components/schemas/RestErrorDetails"
            - type: "null"
      required:
        - code
        - message
      additionalProperties: false
    RestErrorDetails:
      title: REST Error Details
      description: Arbitrary structured data providing additional error context.
    ReleaseComponent:
      title: Release Component
      description: Release component metadata.
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        color:
          type: string
        namingPattern:
          type: string
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - id
        - name
        - color
        - namingPattern
        - createdAt
      additionalProperties: false
    BuiltVersionTransitionResult:
      title: Built Version Transition Result
      description: Built version transition response including current status and history.
      type: object
      properties:
        builtVersion:
          $ref: "#/components/schemas/BuiltVersion"
        status:
          type: string
        history:
          type: array
          items:
            $ref: "#/components/schemas/BuiltVersionTransition"
      required:
        - builtVersion
        - status
        - history
      additionalProperties: false
    BuiltVersion:
      title: Built Version
      description: Built version summary information.
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        versionId:
          type: string
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
      required:
        - id
        - name
        - versionId
        - createdAt
      additionalProperties: false
    ActionHistoryListResponse:
      title: Action History List Response
      description: Paginated action history entries for the current session.
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/ActionHistoryEntry"
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
      required:
        - data
        - pagination
      additionalProperties: false
    ActionHistoryEntry:
      title: Action History Entry
      description: Audit log entry for user or system actions.
      type: object
      properties:
        id:
          type: string
        actionType:
          type: string
        message:
          type: string
        status:
          type: string
          enum:
            - success
            - failed
            - cancelled
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
        createdBy:
          $ref: "#/components/schemas/User"
        metadata:
          anyOf:
            - type: object
              properties: {}
              additionalProperties: {}
            - type: "null"
        subactions:
          type: array
          items:
            $ref: "#/components/schemas/ActionSubaction"
      required:
        - id
        - actionType
        - message
        - status
        - createdAt
        - createdBy
        - subactions
      additionalProperties: false
    ActionSubaction:
      title: Action Subaction
      description: Subaction entry recorded within a user action history item.
      type: object
      properties:
        id:
          type: string
        subactionType:
          type: string
        message:
          type: string
        status:
          type: string
          enum:
            - success
            - failed
            - cancelled
        createdAt:
          $ref: "#/components/schemas/iso8601Timestamp"
        metadata:
          anyOf:
            - type: object
              properties: {}
              additionalProperties: {}
            - type: "null"
      required:
        - id
        - subactionType
        - message
        - status
        - createdAt
      additionalProperties: false
